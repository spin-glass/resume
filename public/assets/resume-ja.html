<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>resume-ja</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="resume-ja_files/libs/clipboard/clipboard.min.js"></script>
<script src="resume-ja_files/libs/quarto-html/quarto.js"></script>
<script src="resume-ja_files/libs/quarto-html/popper.min.js"></script>
<script src="resume-ja_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="resume-ja_files/libs/quarto-html/anchor.min.js"></script>
<link href="resume-ja_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="resume-ja_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="resume-ja_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="resume-ja_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="resume-ja_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="../../resume-ja.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></div>
<main class="content" id="quarto-document-content">



<section id="職務経歴書" class="level1">
<h1>職務経歴書</h1>
<p>2024/07/19</p>
<p>山口 敏弘</p>
<section id="職務要約" class="level2">
<h2 class="anchored" data-anchor-id="職務要約">職務要約</h2>
<p>過去6年間でデータサイエンティストとして多様なプロジェクトに関与しました。前職のコンサルティング会社では、課題解決にデータサイエンスを活用するスキルを身につけました。現職ではマイナポータルデータを利用した機械学習システムの開発に携わり、要件定義から設計までを担当。AWSを活用し、セキュリティ対策も含めたシステム設計スキルを磨いています。しかし、現職でのタスクには自身の興味と少々のギャップがあり、機械学習やデータ分析に関連する業務に携わる機会が少ないです。 今後は機械学習やデータ分析に特化した領域で貢献したいと考えています。</p>
</section>
<section id="スキル" class="level2">
<h2 class="anchored" data-anchor-id="スキル">スキル</h2>
<ul>
<li>機械学習(DL/NLP/CV)</li>
<li>機械学習システムの設計、構築、及び継続的な改善</li>
<li>インフラ (AWS/GCP/オンプレミス)、サーバーサイド、フロントエンドを含むWebアプリケーションの開発経験</li>
</ul>
</section>
<section id="開発環境言語ライブラリ" class="level2">
<h2 class="anchored" data-anchor-id="開発環境言語ライブラリ">開発環境/言語/ライブラリ</h2>
<ul>
<li>AWS, GCP, Databricks
<ul>
<li>AWS: Sagemaker, ECR, Lambda, Athena, S3</li>
<li>GCP: Vertex AI, BigQuery, DataFlow, Cloud Run, Cloud Storage</li>
</ul></li>
<li>Python, R, Scala, Golang</li>
<li>Pyspark, Pandas, scikit-learn, TensorFlow, PyTorch, MLFlow</li>
</ul>
</section>
<section id="資格" class="level2">
<h2 class="anchored" data-anchor-id="資格">資格</h2>
<ul>
<li>ネットワークスペシャリスト</li>
<li>情報セキュリティ安全確保支援士試験合格</li>
<li>IELTS 6.0</li>
<li>TOEIC 905</li>
</ul>
</section>
<section id="イベント" class="level2">
<h2 class="anchored" data-anchor-id="イベント">イベント</h2>
<ul>
<li><a href="https://mlops.connpass.com/event/218772/">MLOps 勉強会登壇</a></li>
<li>Databricks ウェビナー 登壇</li>
</ul>
</section>
<section id="ポートフォリオ" class="level2">
<h2 class="anchored" data-anchor-id="ポートフォリオ">ポートフォリオ</h2>
<p><a href="https://resume.spin-glass.dev/">職務経歴書</a></p>
<ul>
<li>フレームワーク: Next.js(Nextra)</li>
<li>ホスティング: Vercel</li>
</ul>
</section>
<section id="職務経歴" class="level2">
<h2 class="anchored" data-anchor-id="職務経歴">職務経歴</h2>
<section id="hjホールディングス株式会社-機械学習エンジニア" class="level3">
<h3 class="anchored" data-anchor-id="hjホールディングス株式会社-機械学習エンジニア">HJホールディングス株式会社 機械学習エンジニア</h3>
<section id="vodサービスのパーソナライズ機能の実装" class="level4">
<h4 class="anchored" data-anchor-id="vodサービスのパーソナライズ機能の実装">VODサービスのパーソナライズ機能の実装</h4>
<ul>
<li><strong>期間</strong>: 2024/01 - 現在</li>
<li><strong>役割</strong>: 要件定義・設計・開発</li>
<li><strong>環境・手法</strong></li>
<li>GCP
<ul>
<li>Vertex AI Pipelines</li>
<li>Vertex AI Experiments</li>
<li>Vertex AI Workbench</li>
<li>DataProc</li>
<li>BigQuery</li>
</ul></li>
<li>自然言語処理
<ul>
<li>Transfer Learningを用いて学習したBERTによるテキスト埋め込み</li>
</ul></li>
<li><strong>プロジェクト人数</strong>: 8</li>
<li><strong>詳細</strong>:</li>
<li><strong>Point</strong>: 機械学習モデルの学習から推論まで、設計・開発を1人で行っている</li>
</ul>
</section>
<section id="推薦システムの効果検証" class="level4">
<h4 class="anchored" data-anchor-id="推薦システムの効果検証">推薦システムの効果検証</h4>
<ul>
<li><strong>期間</strong>: 2024/01 - 現在</li>
<li><strong>役割</strong>: 要件定義・分析・レポート</li>
<li><strong>環境・手法</strong>
<ul>
<li>ツール
<ul>
<li>BigQuery</li>
<li>DataFlow</li>
<li>GCS</li>
<li>Tableau</li>
</ul></li>
<li>分析手法
<ul>
<li>χ二乗検定</li>
<li>ベイズ推論</li>
</ul></li>
</ul></li>
<li><strong>プロジェクト人数</strong>: 5</li>
<li><strong>詳細</strong>:
<ul>
<li><strong>Point</strong>: 推薦システムの効果検証のためにABテストを設計・分析・レポーティングを行っている</li>
</ul></li>
</ul>
</section>
</section>
<section id="株式会社jmdc-20230601---データイノベーションラボ" class="level3">
<h3 class="anchored" data-anchor-id="株式会社jmdc-20230601---データイノベーションラボ">株式会社JMDC (2023/06/01 - ) データイノベーションラボ</h3>
<section id="マイナポデータを用いた保険会社の審査システム構築" class="level4">
<h4 class="anchored" data-anchor-id="マイナポデータを用いた保険会社の審査システム構築">マイナポデータを用いた保険会社の審査システム構築</h4>
<ul>
<li><strong>期間</strong>: 2023/06 - 2023/12</li>
<li><strong>役割</strong>: 要件定義・設計・開発</li>
<li><strong>環境・手法</strong>: AWS</li>
<li><strong>プロジェクト人数</strong>: 12</li>
<li><strong>詳細</strong>:
<ul>
<li><strong>Point</strong>: このプロジェクトでは、マイナポータルデータを用いて保険会社の審査システムの設計をしています。</li>
<li><strong>Reason</strong>: マイナポータルデータを活用し、通常では審査をしないように人に対しても保険加入を認め、収益性を向上させます。</li>
<li><strong>Example</strong>: AWSを用いて、セキュアなデータ基盤・APIを設計。３つの部署が関わるプロジェクトで、主に機械学習システムを担当しています。</li>
</ul></li>
</ul>
</section>
<section id="sagemaker推論パイプラインを利用したレポート機能構築" class="level4">
<h4 class="anchored" data-anchor-id="sagemaker推論パイプラインを利用したレポート機能構築">SageMaker推論パイプラインを利用したレポート機能構築</h4>
<ul>
<li><strong>期間</strong>: 2023/07 - 2023/12</li>
<li><strong>役割</strong>: 設計・開発・テスト</li>
<li><strong>環境・手法</strong>: AWS SageMaker</li>
<li><strong>プロジェクト人数</strong>: 5</li>
<li><strong>詳細</strong>:
<ul>
<li><strong>Point</strong>: AWS SageMakerの推論パイプラインを用いて、製薬会社向けの調剤利用数のレポート機能を開発しました。</li>
<li><strong>Reason</strong>: 製薬会社が調剤利用数に基づくビジネス判断を効率よく行うためのレポートについて、手作業で開発していたものを自動化しました。</li>
<li><strong>Example</strong>: SageMakerを活用してデータ収集から解析、レポート生成までの一連の流れを自動化しました。今後別の調剤を扱う際にこのシステムを展開することが期待できます。</li>
</ul></li>
</ul>
</section>
</section>
<section id="eyストラテジーアンドコンサルティング20220901---20230531" class="level3">
<h3 class="anchored" data-anchor-id="eyストラテジーアンドコンサルティング20220901---20230531">EYストラテジーアンドコンサルティング（2022/09/01 - 2023/05/31）</h3>
<section id="ma-データの分析" class="level4">
<h4 class="anchored" data-anchor-id="ma-データの分析">M&amp;A データの分析</h4>
<ul>
<li><strong>期間</strong>: 2023/01</li>
<li><strong>役割</strong>: フロントエンド開発、アルゴリズム開発</li>
<li><strong>成果</strong>: M&amp;A成功率の向上と投資先選定の効率化</li>
<li><strong>プロジェクト人数</strong>: 6</li>
<li><strong>環境・手法</strong>: PythonとFastAPI, Elasticsearch, Logstash, Kibanaを用いたデータ整理・インデックス化・可視化</li>
<li><strong>詳細</strong>:
<ul>
<li><strong>Point</strong>: このプロジェクトでM&amp;A成功率と投資先選定の効率が向上しました。</li>
<li><strong>Reason</strong>: 新しい投資先のリスクとリターンを効率的に評価するためにこのプロジェクトを行いました。</li>
<li><strong>Example</strong>: Elasticsearch, Logstash, Kibanaを用いてデータを整理・インデックス化・可視化しました。</li>
</ul></li>
</ul>
</section>
<section id="中古車ディーラーが販売先の中進国に与える経済効果の算出" class="level4">
<h4 class="anchored" data-anchor-id="中古車ディーラーが販売先の中進国に与える経済効果の算出">中古車ディーラーが販売先の中進国に与える経済効果の算出</h4>
<ul>
<li><strong>期間</strong>: 2022/12 - 2022/01</li>
<li><strong>役割</strong>: データエンジニア、データサイエンティスト</li>
<li><strong>成果</strong>: 中進国への中古車流通のポジティブな経済影響の確認</li>
<li><strong>プロジェクト人数</strong>: 8</li>
<li><strong>環境・手法</strong>: UN ComtradeとWorld Bank Dataを用いたデータ収集, 操作変数(instrumental variable)を用いた統計的因果推論</li>
<li><strong>詳細</strong>
<ul>
<li><strong>Point</strong>: 中進国への中古車流通が経済にポジティブな影響をもたらすことを確認しました。</li>
<li><strong>Reason</strong>: 中古車流通が中進国の経済に与える影響を評価する必要がありました。</li>
<li><strong>Example</strong>: 対象となる国と経済的規模が似ている国を利用した操作変数法を用いて、経済指標と中古車流通との関係を解析しました。</li>
</ul></li>
</ul>
</section>
<section id="財務モデル作成" class="level4">
<h4 class="anchored" data-anchor-id="財務モデル作成">財務モデル作成</h4>
<ul>
<li><strong>期間</strong>: 2022/12 - 2023/01</li>
<li><strong>役割</strong>: フロントエンド開発</li>
<li><strong>成果</strong>: 企業価値の精緻な算出と投資判断の向上</li>
<li><strong>プロジェクト人数</strong>: 4</li>
<li><strong>環境・手法</strong>: Excelを用いたディスカウントキャッシュフロー法（DCF）</li>
<li><strong>詳細</strong>
<ul>
<li><strong>Point</strong>: 企業価値をより精緻に算出し、投資判断が向上しました。</li>
<li><strong>Reason</strong>: 精緻な企業価値の算出が必要でした。</li>
<li><strong>Example</strong>: Excelとディスカウントキャッシュフロー法（DCF）を用いて企業価値を算出しました。</li>
</ul></li>
</ul>
</section>
</section>
<section id="株式会社日本経済通信社-嘱託契約期間-3-年-20190801---20220731" class="level3">
<h3 class="anchored" data-anchor-id="株式会社日本経済通信社-嘱託契約期間-3-年-20190801---20220731">株式会社日本経済通信社 (嘱託契約期間 3 年 2019/08/01 - 2022/07/31)</h3>
<section id="データ分析基盤の設計構築" class="level4">
<h4 class="anchored" data-anchor-id="データ分析基盤の設計構築">データ分析基盤の設計・構築</h4>
<ul>
<li><strong>期間</strong>: 2019/10 - 2022/07</li>
<li><strong>担当</strong>: データ基盤設計・データ基盤構築</li>
<li><strong>環境・手法</strong>: Databricks, AWS, GCP, Python, Scala, Spark, PySpark, Golang</li>
<li><strong>プロジェクト人数</strong>: 7</li>
<li><strong>概要と成果</strong>:
<ul>
<li>Databricksと協力してデータ分析基盤を構築。</li>
<li>効率的なデータ活用と高度な分析が可能になり、ニュースアプリ日経Waveのパーソナライズ機能も高度化。</li>
</ul></li>
<li><strong>詳細</strong>:
<ul>
<li>環境の制約と目標を考慮して7人のチームで基盤の設計・構築を担当。</li>
<li>AWS, GCP, Python, Scala, Spark, PySparkなどを活用し、特にDatabricksでMLOpsを一元管理。</li>
<li>このプロジェクトにより、データ分析、モデル構築、デプロイの効率が大幅に向上。</li>
</ul></li>
</ul>
</section>
<section id="推薦アルゴリズム開発" class="level4">
<h4 class="anchored" data-anchor-id="推薦アルゴリズム開発">推薦アルゴリズム開発</h4>
<ul>
<li><strong>期間</strong>: 2020/02 - 2022/07</li>
<li><strong>担当</strong>: アルゴリズム開発</li>
<li><strong>環境・手法</strong>: Jupyter Notebook, TensorFlow, Pytorch, BERT, 協調フィルタリング</li>
<li><strong>成果</strong>:
<ul>
<li>アプリのCTRを約5%向上</li>
</ul></li>
<li><strong>詳細</strong>:
<ul>
<li>単純な協調フィルタリングでは限界があったため、BERTとTensorFlow, Pytorchを用いて新しい推薦アルゴリズムを開発。</li>
<li>このアプローチにより、CTRが約5%向上し、ユーザーエンゲージメントと企業価値に大きく貢献。</li>
</ul></li>
</ul>
</section>
<section id="機械学習システム開発運用" class="level4">
<h4 class="anchored" data-anchor-id="機械学習システム開発運用">機械学習システム開発・運用</h4>
<ul>
<li><strong>期間</strong>: 2020/06 - 2022/07</li>
<li><strong>担当</strong>: アーキテクチャ設計, クラウド開発, バックエンド開発, フロントエンド開発</li>
<li><strong>環境・手法</strong>: AWS, Databricks, GCP, A/B テスト, CI/CD, Golang, Flutter</li>
<li><strong>詳細</strong>:
<ul>
<li>手動運用の限界と効果検証の必要性から、AWS, GCP, Databricksを用いて運用を自動化。</li>
<li>CI/CDパイプラインの構築とA/B テストで効果を定量的に評価。</li>
<li>GolangとFlutterを用いたフロントエンド・バックエンド開発も担当。</li>
<li>これにより、システムの品質とパフォーマンスが大幅に向上。</li>
</ul></li>
</ul>
</section>
</section>
<section id="株式会社-aiforce-solutions20190201---20190731" class="level3">
<h3 class="anchored" data-anchor-id="株式会社-aiforce-solutions20190201---20190731">株式会社 aiforce solutions(2019/02/01 - 2019/07/31)</h3>
<ul>
<li><p>スーパーマーケットの購買傾向の分析</p>
<ul>
<li>期間: 2019/04 - 2019/07</li>
<li>概要: 大手商社の DX 事業部に常駐し、AI 活用に関 する相談を各事業部、子会社から受ける</li>
<li>担当: データサイエンティスト</li>
<li>環境・手法: R, アソシエーション分析</li>
<li>プロジェクト人数: 3</li>
</ul></li>
<li><p>AI 学習プラットフォームを開発</p>
<ul>
<li>期間: 2019/02 - 2019/07</li>
<li>概要: AI 教育用のプラットフォーム開発</li>
<li>担当: バックエンド開発,フロントエンド開発</li>
<li>環境・手法: AWS,Bottle,Python,React</li>
<li>プロジェクト人数: 5</li>
</ul></li>
</ul>
</section>
<section id="株式会社グリッド20170401---20190131" class="level3">
<h3 class="anchored" data-anchor-id="株式会社グリッド20170401---20190131">株式会社グリッド(2017/04/01 - 2019/01/31)</h3>
<ul>
<li><p>DLライブラリの画像モジュールの論文実装</p>
<ul>
<li>期間: 2018/01 - 2019/01</li>
<li>概要: 自社制作のDLライブラリの画像モジュールを担当</li>
<li>担当: 機械学習エンジニア</li>
<li>環境・手法: SSG,VAE,VGG</li>
<li>プロジェクト人数: 5</li>
</ul></li>
<li><p>画像認識システム開発の FE/BE 開発</p>
<ul>
<li>期間: 2018/01 - 2019/01</li>
<li>概要: 画像認識システム開発の FE/BE 開発</li>
<li>担当: BE, FE</li>
<li>環境・手法: Vue.js, Flask</li>
<li>プロジェクト人数: 5</li>
</ul></li>
<li><p>プラント制御の強化学習基盤</p>
<ul>
<li>期間: 2018/11 - 2019/01</li>
<li>概要: 強化学習によるプラント制御 PJ のインフラを担当</li>
<li>担当: データエンジニア,データ基盤設計</li>
<li>環境・手法: Python, MQTT</li>
<li>プロジェクト人数: 3</li>
</ul></li>
<li><p>Fax 画像の分類モデル</p>
<ul>
<li>期間: 2017/04 - 2018/12</li>
<li>概要: Fax 画像の分類モデルの作成及び、業務システムへの組み込み</li>
<li>担当: データサイエンティスト</li>
<li>環境・手法: OpenCV,Python, VAE,VGG</li>
<li>プロジェクト人数: 2</li>
</ul></li>
</ul>
</section>
<section id="株式会社-cuon20160101---20170331" class="level3">
<h3 class="anchored" data-anchor-id="株式会社-cuon20160101---20170331">株式会社 Cuon(2016/01/01 - 2017/03/31)</h3>
<ul>
<li><p>社内ポータルサイト作成</p>
<ul>
<li>期間: 2016/12 - 2017/03</li>
<li>概要: サービスサイトの設計・構築及び PM を担当</li>
<li>担当: Webエンジニア</li>
<li>環境・手法: PHP</li>
<li>プロジェクト人数: 2</li>
</ul></li>
<li><p>スタートアップ向け作成Webサイト作成</p>
<ul>
<li>期間: 2016/12 - 2017/03</li>
<li>概要: 要件定義・サービスサイトの設計・構築</li>
<li>担当: Webエンジニア</li>
<li>環境・手法: Ruby on Rails</li>
<li>プロジェクト人数: 2</li>
</ul></li>
</ul>
</section>
<section id="株式会社-ap-コミュニケーションズ20140501---20151231" class="level3">
<h3 class="anchored" data-anchor-id="株式会社-ap-コミュニケーションズ20140501---20151231">株式会社 AP コミュニケーションズ(2014/05/01 - 2015/12/31)</h3>
<ul>
<li><p>社内インフラの運用・保守</p>
<ul>
<li>期間: 2014/03 - 2015/12</li>
<li>概要: 社内インフラの運用・保守</li>
<li>担当: 運用・保守</li>
<li>環境・手法: Windows Server</li>
<li>プロジェクト人数: 15</li>
</ul></li>
<li><p>社内インフラの運用設計作成</p>
<ul>
<li>期間: 2015/06 - 2015/12</li>
<li>概要: 社内インフラの運用設計作成</li>
<li>担当: 設計</li>
<li>環境・手法: ITIL</li>
<li>プロジェクト人数: 15</li>
</ul></li>
</ul>
</section>
<section id="日本通信株式会社20130401---20140430" class="level3">
<h3 class="anchored" data-anchor-id="日本通信株式会社20130401---20140430">日本通信株式会社(2013/04/01 - 2014/04/30)</h3>
<ul>
<li><p>自社サービスサイトの設計・構築</p>
<ul>
<li>期間: 2013/04 - 2014/04</li>
<li>概要: 自社サイトのサービスサイトを LAMP 構成で作成した</li>
<li>担当: 設計,構築</li>
<li>環境・手法: Apache,Linux,MySQL,PHP</li>
<li>プロジェクト人数: 2</li>
</ul></li>
</ul>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>